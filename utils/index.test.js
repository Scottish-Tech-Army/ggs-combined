"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const aws_1 = require("./aws");
const setupTests_1 = require("./setupTests");
const index_1 = require("./index");
var XLSX = require("xlsx");
const jest_fetch_mock_1 = require("jest-fetch-mock");
jest.mock("./aws");
const WIKIMEDIA_URL = "https://commons.wikimedia.org/wiki/File:Crocodile_Rock,_Millport.jpg";
const WIKIMEDIA_REQUEST = "https://en.wikipedia.org/w/api.php?format=json&action=query&titles=File:Crocodile_Rock,_Millport.jpg&prop=imageinfo&iiprop=user|extmetadata|url&iiextmetadatafilter=LicenseShortName&iiurlwidth=640";
const WIKIMEDIA_FILENAME = "640px-Crocodile_Rock%2C_Millport.jpg";
const WIKIMEDIA_IMAGE_URL = "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Crocodile_Rock%2C_Millport.jpg/" +
    WIKIMEDIA_FILENAME;
const WIKIMEDIA_RESPONSE = JSON.stringify({
    batchcomplete: "",
    query: {
        normalized: [
            {
                from: "File:Crocodile_Rock,_Millport.jpg",
                to: "File:Crocodile Rock, Millport.jpg",
            },
        ],
        pages: {
            "-1": {
                ns: 6,
                title: "File:Crocodile Rock, Millport.jpg",
                missing: "",
                known: "",
                imagerepository: "shared",
                imageinfo: [
                    {
                        user: "DeFacto",
                        thumburl: WIKIMEDIA_IMAGE_URL,
                        thumbwidth: 640,
                        thumbheight: 400,
                        responsiveUrls: {
                            "1.5": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Crocodile_Rock%2C_Millport.jpg/960px-Crocodile_Rock%2C_Millport.jpg",
                            "2": "https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Crocodile_Rock%2C_Millport.jpg/1280px-Crocodile_Rock%2C_Millport.jpg",
                        },
                        url: "https://upload.wikimedia.org/wikipedia/commons/b/ba/Crocodile_Rock%2C_Millport.jpg",
                        descriptionurl: "https://commons.wikimedia.org/wiki/File:Crocodile_Rock,_Millport.jpg",
                        descriptionshorturl: "https://commons.wikimedia.org/w/index.php?curid=43411470",
                        extmetadata: {
                            LicenseShortName: {
                                value: "CC BY-SA 4.0",
                                source: "commons-desc-page",
                                hidden: "",
                            },
                        },
                    },
                ],
            },
        },
    },
});
const EXPECTED_LOCATION_COUNT = 62;
// Expected test locations from processing test spreadsheet
const INDEX_LYNN_FALLS = 42;
const LOCATION_LYNN_FALLS = expect.objectContaining({
    challenge: "Try your hand at some nature photography!",
    city: "Dalry",
    county: "Ayrshire North",
    description: expect.stringContaining("A short walk in a beautiful wooded glen"),
    latitude: 55.700427690836655,
    locationId: "ayrshirenorth-dalry-lynnfalls",
    longitude: -4.73272769919101,
    name: "Lynn Falls ",
    photos: [
        {
            url: `${setupTests_1.TEST_PHOTOS_BASEURL}/ayrshirenorth-dalry-lynnfalls.jpg`,
        },
    ],
    region: "Ayrshire North",
});
const DYNAMODB_LYNN_FALLS = {
    challenge: { S: "Try your hand at some nature photography!" },
    city: { S: "Dalry" },
    county: { S: "Ayrshire North" },
    description: {
        S: expect.stringContaining("A short walk in a beautiful wooded glen"),
    },
    latitude: { N: "55.700427690836655" },
    locationId: { S: "ayrshirenorth-dalry-lynnfalls" },
    longitude: { N: "-4.73272769919101" },
    name: { S: "Lynn Falls " },
    photos: {
        L: [
            {
                M: {
                    url: {
                        S: `${setupTests_1.TEST_PHOTOS_BASEURL}/ayrshirenorth-dalry-lynnfalls.jpg`,
                    },
                },
            },
        ],
    },
    region: { S: "Ayrshire North" },
};
const INDEX_CROCODILE_ROCK = 33;
const LOCATION_CROCODILE_ROCK = expect.objectContaining({
    challenge: "Draw your own crocodile masterpiece!",
    city: "Millport",
    county: "Ayrshire North",
    description: expect.stringContaining("Crocodile Rock is an iconic Millport landmark"),
    latitude: 55.75308162268832,
    locationId: "ayrshirenorth-millport-crocodilerock",
    longitude: -4.92252593043097,
    name: "Crocodile Rock",
    photos: [
        {
            attribution: "DeFacto",
            copyright: "CC BY-SA 4.0",
            originalUrl: WIKIMEDIA_URL,
            url: `${setupTests_1.TEST_PHOTOS_BASEURL}/640px-Crocodile_Rock%2C_Millport.jpg`,
        },
    ],
    region: "Ayrshire North",
});
describe("buildLocations", () => {
    it("success response", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        var workbook = XLSX.readFile(setupTests_1.TEST_SPREADSHEET_PATH);
        const result = await (0, index_1.buildLocations)(workbook);
        // Check expected number of locations
        expect(result).toHaveLength(EXPECTED_LOCATION_COUNT);
        // Check form of sample location - photo file
        expect(result[INDEX_LYNN_FALLS]).toEqual(LOCATION_LYNN_FALLS);
        // Check form of sample location - photo wiki link
        expect(result[INDEX_CROCODILE_ROCK]).toEqual(LOCATION_CROCODILE_ROCK);
        // Expect location with bad data to be filtered out
        expect(result.find((location) => location.name === "Dalhousie Arch")).toBeUndefined();
    });
});
describe("checkSpreadsheet", () => {
    it("success response", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        const result = await (0, index_1.checkSpreadsheet)();
        expect(result).toEqual(EXPECTED_LOCATION_COUNT);
        expect(aws_1.dynamodbClient.send).not.toHaveBeenCalled();
    });
});
describe("processSpreadsheet", () => {
    it("success response", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        await (0, index_1.processSpreadsheet)();
        expect(aws_1.dynamodbClient.send).toHaveBeenCalledTimes(EXPECTED_LOCATION_COUNT);
        expect(aws_1.dynamodbClient.send).toHaveBeenNthCalledWith(INDEX_LYNN_FALLS + 1, expect.objectContaining({
            input: {
                Item: DYNAMODB_LYNN_FALLS,
                TableName: setupTests_1.TEST_LOCATIONS_TABLE_NAME,
            },
        }));
    });
});
describe("parseCoordinates", () => {
    it("success response with string decimal values", async () => {
        expect((0, index_1.parseCoordinates)("55.76281N", "-4.014507E")).toEqual({
            latitude: 55.76281,
            longitude: -4.014507,
        });
        // Handle wrong longitude direction
        expect((0, index_1.parseCoordinates)("55.79656N", "-4.0262W")).toEqual({
            latitude: 55.79656,
            longitude: -4.0262,
        });
        // Extra characters
        expect((0, index_1.parseCoordinates)("57.6512° N", "3.3055° W")).toEqual({
            latitude: 57.6512,
            longitude: -3.3055,
        });
        expect((0, index_1.parseCoordinates)("56.2941 / 56°17'38\"N", "-3.7127 / 3°42'45\"W")).toEqual({
            latitude: 56.2941,
            longitude: -3.7127,
        });
    });
    it("success response with numeric decimal values", async () => {
        expect((0, index_1.parseCoordinates)(57.13254, -2.20171)).toEqual({
            latitude: 57.13254,
            longitude: -2.20171,
        });
        // In cases where longitude is missing sign
        expect((0, index_1.parseCoordinates)(55.7814, 4.2961)).toEqual({
            latitude: 55.7814,
            longitude: -4.2961,
        });
        // High precision
        expect((0, index_1.parseCoordinates)(56.0007889699862, -3.84045798674573)).toEqual({
            latitude: 56.0007889699862,
            longitude: -3.84045798674573,
        });
    });
    it("success response with degree minute seconds values", async () => {
        expect((0, index_1.parseCoordinates)("56°07'23.3\"N", "3°07'23.1\"W")).toEqual({
            latitude: 56.12313888888889,
            longitude: -3.123083333333333,
        });
        expect((0, index_1.parseCoordinates)("56° 07' 23.3 \"N", "3° 07 ' 23.1 \"W")).toEqual({
            latitude: 56.12313888888889,
            longitude: -3.123083333333333,
        });
        expect((0, index_1.parseCoordinates)("57°36′58′′N", "3°31′27.55′′W")).toEqual({
            latitude: 57.61611111111111,
            longitude: -3.5243194444444446,
        });
        expect((0, index_1.parseCoordinates)("56°07'23\"N", "3°07'23\"W")).toEqual({
            latitude: 56.12305555555555,
            longitude: -3.1230555555555557,
        });
    });
    it("fail with missing latitude", async () => {
        expect((0, index_1.parseCoordinates)(57.13254, undefined)).toBeUndefined();
    });
    it("fail with missing longitude", async () => {
        expect((0, index_1.parseCoordinates)(undefined, -2.20171)).toBeUndefined();
    });
    it("fail with missing decimal point", async () => {
        expect((0, index_1.parseCoordinates)(56731548, -2.660825)).toBeUndefined();
        expect((0, index_1.parseCoordinates)(56.731548, -2660825)).toBeUndefined();
        expect((0, index_1.parseCoordinates)(56731548, -2660825)).toBeUndefined();
    });
    it("fail with missing seconds", async () => {
        expect((0, index_1.parseCoordinates)("56° 13' N", "2 41' W")).toBeUndefined();
    });
    it("fail with transposed latitude and longitude", async () => {
        expect((0, index_1.parseCoordinates)(-2.20171, 57.13254)).toBeUndefined();
    });
    it("fail with invalid input", async () => {
        expect((0, index_1.parseCoordinates)("XXX", "YYY")).toBeUndefined();
    });
});
describe("getWikimediaPhotoData", () => {
    it("success response", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        const result = await (0, index_1.getWikimediaPhotoData)(WIKIMEDIA_URL);
        expect(result).toEqual({
            imageUrl: WIKIMEDIA_IMAGE_URL,
            filename: WIKIMEDIA_FILENAME,
            originalUrl: WIKIMEDIA_URL,
            attribution: "DeFacto",
            copyright: "CC BY-SA 4.0",
        });
        expect(jest_fetch_mock_1.default).toHaveBeenCalledTimes(1);
        expect(jest_fetch_mock_1.default).toHaveBeenCalledWith(WIKIMEDIA_REQUEST, {
            method: "GET",
        });
    });
});
describe("getPhotos", () => {
    const LOCATION_ID = "new-location";
    const ATTRIBUTION_NAME = "Its my photo";
    const ARCHIVED_PHOTO_REF = "https://commons.wikimedia.org/wiki/File:DSCF1764_Johnston_Gardens_Aberdeen.jpg";
    it("success response with archived photo", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        const result = await (0, index_1.getPhotos)(LOCATION_ID, ARCHIVED_PHOTO_REF);
        expect(result).toEqual([
            {
                attribution: "AlasdairW",
                copyright: "CC BY-SA 3.0",
                originalUrl: "https://commons.wikimedia.org/wiki/File:DSCF1764_Johnston_Gardens_Aberdeen.jpg",
                url: `${setupTests_1.TEST_PHOTOS_BASEURL}/640px-DSCF1764_Johnston_Gardens_Aberdeen.jpg`,
            },
        ]);
        expect(jest_fetch_mock_1.default).not.toHaveBeenCalled();
    });
    it("success response with wikimedia photo", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        const result = await (0, index_1.getPhotos)(LOCATION_ID, WIKIMEDIA_URL);
        expect(result).toEqual([
            {
                attribution: "DeFacto",
                copyright: "CC BY-SA 4.0",
                originalUrl: WIKIMEDIA_URL,
                url: `${setupTests_1.TEST_PHOTOS_BASEURL}/${WIKIMEDIA_FILENAME}`,
            },
        ]);
        expect(jest_fetch_mock_1.default).toHaveBeenCalledTimes(1);
        expect(jest_fetch_mock_1.default).toHaveBeenCalledWith(WIKIMEDIA_REQUEST, {
            method: "GET",
        });
    });
    it("success response with file photo", async () => {
        jest_fetch_mock_1.default.mockResponse(WIKIMEDIA_RESPONSE);
        const result = await (0, index_1.getPhotos)(LOCATION_ID, "Local file.jpg");
        expect(result).toEqual([
            {
                url: `${setupTests_1.TEST_PHOTOS_BASEURL}/new-location.jpg`,
            },
        ]);
        expect(jest_fetch_mock_1.default).not.toHaveBeenCalled();
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImluZGV4LnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwrQkFBdUM7QUFDdkMsNkNBSXNCO0FBQ3RCLG1DQU9pQjtBQUNqQixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IscURBQXdDO0FBRXhDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7QUFFbkIsTUFBTSxhQUFhLEdBQ2pCLHNFQUFzRSxDQUFDO0FBQ3pFLE1BQU0saUJBQWlCLEdBQ3JCLHFNQUFxTSxDQUFDO0FBRXhNLE1BQU0sa0JBQWtCLEdBQUcsc0NBQXNDLENBQUM7QUFDbEUsTUFBTSxtQkFBbUIsR0FDdkIsMkZBQTJGO0lBQzNGLGtCQUFrQixDQUFDO0FBRXJCLE1BQU0sa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN4QyxhQUFhLEVBQUUsRUFBRTtJQUNqQixLQUFLLEVBQUU7UUFDTCxVQUFVLEVBQUU7WUFDVjtnQkFDRSxJQUFJLEVBQUUsbUNBQW1DO2dCQUN6QyxFQUFFLEVBQUUsbUNBQW1DO2FBQ3hDO1NBQ0Y7UUFDRCxLQUFLLEVBQUU7WUFDTCxJQUFJLEVBQUU7Z0JBQ0osRUFBRSxFQUFFLENBQUM7Z0JBQ0wsS0FBSyxFQUFFLG1DQUFtQztnQkFDMUMsT0FBTyxFQUFFLEVBQUU7Z0JBQ1gsS0FBSyxFQUFFLEVBQUU7Z0JBQ1QsZUFBZSxFQUFFLFFBQVE7Z0JBQ3pCLFNBQVMsRUFBRTtvQkFDVDt3QkFDRSxJQUFJLEVBQUUsU0FBUzt3QkFDZixRQUFRLEVBQUUsbUJBQW1CO3dCQUM3QixVQUFVLEVBQUUsR0FBRzt3QkFDZixXQUFXLEVBQUUsR0FBRzt3QkFDaEIsY0FBYyxFQUFFOzRCQUNkLEtBQUssRUFDSCwrSEFBK0g7NEJBQ2pJLEdBQUcsRUFBRSxnSUFBZ0k7eUJBQ3RJO3dCQUNELEdBQUcsRUFBRSxvRkFBb0Y7d0JB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RSxhQUFhLENBQUMsQ0FBQztRQUUzRCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO1lBQ3JCO2dCQUNFLFdBQVcsRUFBRSxTQUFTO2dCQUN0QixTQUFTLEVBQUUsY0FBYztnQkFDekIsV0FBVyxFQUFFLGFBQWE7Z0JBQzFCLEdBQUcsRUFBRSxHQUFHLGdDQUFtQixJQUFJLGtCQUFrQixFQUFFO2FBQ3BEO1NBQ0YsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLHlCQUFTLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUMzQyxNQUFNLENBQUMseUJBQVMsQ0FBQyxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixFQUFFO1lBQ3hELE1BQU0sRUFBRSxLQUFLO1NBQ2QsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxFQUFFLENBQUMsa0NBQWtDLEVBQUUsS0FBSyxJQUFJLEVBQUU7UUFDaEQseUJBQVMsQ0FBQyxZQUFZLENBQUMsa0JBQWtCLENBQUMsQ0FBQztRQUUzQyxNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUEsaUJBQVMsRUFBQyxXQUFXLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztRQUU5RCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO1lBQ3JCO2dCQUNFLEdBQUcsRUFBRSxHQUFHLGdDQUFtQixtQkFBbUI7YUFDL0M7U0FDRixDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMseUJBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO0lBQzNDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkeW5hbW9kYkNsaWVudCB9IGZyb20gXCIuL2F3c1wiO1xuaW1wb3J0IHtcbiAgVEVTVF9MT0NBVElPTlNfVEFCTEVfTkFNRSxcbiAgVEVTVF9QSE9UT1NfQkFTRVVSTCxcbiAgVEVTVF9TUFJFQURTSEVFVF9QQVRILFxufSBmcm9tIFwiLi9zZXR1cFRlc3RzXCI7XG5pbXBvcnQge1xuICBidWlsZExvY2F0aW9ucyxcbiAgY2hlY2tTcHJlYWRzaGVldCxcbiAgZ2V0UGhvdG9zLFxuICBnZXRXaWtpbWVkaWFQaG90b0RhdGEsXG4gIHBhcnNlQ29vcmRpbmF0ZXMsXG4gIHByb2Nlc3NTcHJlYWRzaGVldCxcbn0gZnJvbSBcIi4vaW5kZXhcIjtcbnZhciBYTFNYID0gcmVxdWlyZShcInhsc3hcIik7XG5pbXBvcnQgZmV0Y2hNb2NrIGZyb20gXCJqZXN0LWZldGNoLW1vY2tcIjtcblxuamVzdC5tb2NrKFwiLi9hd3NcIik7XG5cbmNvbnN0IFdJS0lNRURJQV9VUkwgPVxuICBcImh0dHBzOi8vY29tbW9ucy53aWtpbWVkaWEub3JnL3dpa2kvRmlsZTpDcm9jb2RpbGVfUm9jayxfTWlsbHBvcnQuanBnXCI7XG5jb25zdCBXSUtJTUVESUFfUkVRVUVTVCA9XG4gIFwiaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3cvYXBpLnBocD9mb3JtYXQ9anNvbiZhY3Rpb249cXVlcnkmdGl0bGVzPUZpbGU6Q3JvY29kaWxlX1JvY2ssX01pbGxwb3J0LmpwZyZwcm9wPWltYWdlaW5mbyZpaXByb3A9dXNlcnxleHRtZXRhZGF0YXx1cmwmaWlleHRtZXRhZGF0YWZpbHRlcj1MaWNlbnNlU2hvcnROYW1lJmlpdXJsd2lkdGg9NjQwXCI7XG5cbmNvbnN0IFdJS0lNRURJQV9GSUxFTkFNRSA9IFwiNjQwcHgtQ3JvY29kaWxlX1JvY2slMkNfTWlsbHBvcnQuanBnXCI7XG5jb25zdCBXSUtJTUVESUFfSU1BR0VfVVJMID1cbiAgXCJodHRwczovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iL2IvYmEvQ3JvY29kaWxlX1JvY2slMkNfTWlsbHBvcnQuanBnL1wiICtcbiAgV0lLSU1FRElBX0ZJTEVOQU1FO1xuXG5jb25zdCBXSUtJTUVESUFfUkVTUE9OU0UgPSBKU09OLnN0cmluZ2lmeSh7XG4gIGJhdGNoY29tcGxldGU6IFwiXCIsXG4gIHF1ZXJ5OiB7XG4gICAgbm9ybWFsaXplZDogW1xuICAgICAge1xuICAgICAgICBmcm9tOiBcIkZpbGU6Q3JvY29kaWxlX1JvY2ssX01pbGxwb3J0LmpwZ1wiLFxuICAgICAgICB0bzogXCJGaWxlOkNyb2NvZGlsZSBSb2NrLCBNaWxscG9ydC5qcGdcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICBwYWdlczoge1xuICAgICAgXCItMVwiOiB7XG4gICAgICAgIG5zOiA2LFxuICAgICAgICB0aXRsZTogXCJGaWxlOkNyb2NvZGlsZSBSb2NrLCBNaWxscG9ydC5qcGdcIixcbiAgICAgICAgbWlzc2luZzogXCJcIixcbiAgICAgICAga25vd246IFwiXCIsXG4gICAgICAgIGltYWdlcmVwb3NpdG9yeTogXCJzaGFyZWRcIixcbiAgICAgICAgaW1hZ2VpbmZvOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdXNlcjogXCJEZUZhY3RvXCIsXG4gICAgICAgICAgICB0aHVtYnVybDogV0lLSU1FRElBX0lNQUdFX1VSTCxcbiAgICAgICAgICAgIHRodW1id2lkdGg6IDY0MCxcbiAgICAgICAgICAgIHRodW1iaGVpZ2h0OiA0MDAsXG4gICAgICAgICAgICByZXNwb25zaXZlVXJsczoge1xuICAgICAgICAgICAgICBcIjEuNVwiOlxuICAgICAgICAgICAgICAgIFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi9iL2JhL0Nyb2NvZGlsZV9Sb2NrJTJDX01pbGxwb3J0LmpwZy85NjBweC1Dcm9jb2RpbGVfUm9jayUyQ19NaWxscG9ydC5qcGdcIixcbiAgICAgICAgICAgICAgXCIyXCI6IFwiaHR0cHM6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi9iL2JhL0Nyb2NvZGlsZV9Sb2NrJTJDX01pbGxwb3J0LmpwZy8xMjgwcHgtQ3JvY29kaWxlX1JvY2slMkNfTWlsbHBvcnQuanBnXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXJsOiBcImh0dHBzOi8vdXBsb2FkLndpa2ltZWRpYS5vcmcvd2lraXBlZGlhL2NvbW1vbnMvYi9iYS9Dcm9jb2RpbGVfUm9jayUyQ19NaWxscG9ydC5qcGdcIixcbiAgICAgICAgICAgIGRlc2NyaXB0aW9udXJsOlxuICAgICAgICAgICAgICBcImh0dHBzOi8vY29tbW9ucy53aWtpbWVkaWEub3JnL3dpa2kvRmlsZTpDcm9jb2RpbGVfUm9jayxfTWlsbHBvcnQuanBnXCIsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbnNob3J0dXJsOlxuICAgICAgICAgICAgICBcImh0dHBzOi8vY29tbW9ucy53aWtpbWVkaWEub3JnL3cvaW5kZXgucGhwP2N1cmlkPTQzNDExNDcwXCIsXG4gICAgICAgICAgICBleHRtZXRhZGF0YToge1xuICAgICAgICAgICAgICBMaWNlbnNlU2hvcnROYW1lOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiQ0MgQlktU0EgNC4wXCIsXG4gICAgICAgICAgICAgICAgc291cmNlOiBcImNvbW1vbnMtZGVzYy1wYWdlXCIsXG4gICAgICAgICAgICAgICAgaGlkZGVuOiBcIlwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICB9LFxuICB9LFxufSk7XG5cbmNvbnN0IEVYUEVDVEVEX0xPQ0FUSU9OX0NPVU5UID0gNjI7XG5cbi8vIEV4cGVjdGVkIHRlc3QgbG9jYXRpb25zIGZyb20gcHJvY2Vzc2luZyB0ZXN0IHNwcmVhZHNoZWV0XG5jb25zdCBJTkRFWF9MWU5OX0ZBTExTID0gNDI7XG5cbmNvbnN0IExPQ0FUSU9OX0xZTk5fRkFMTFMgPSBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gIGNoYWxsZW5nZTogXCJUcnkgeW91ciBoYW5kIGF0IHNvbWUgbmF0dXJlIHBob3RvZ3JhcGh5IVwiLFxuICBjaXR5OiBcIkRhbHJ5XCIsXG4gIGNvdW50eTogXCJBeXJzaGlyZSBOb3J0aFwiLFxuICBkZXNjcmlwdGlvbjogZXhwZWN0LnN0cmluZ0NvbnRhaW5pbmcoXG4gICAgXCJBIHNob3J0IHdhbGsgaW4gYSBiZWF1dGlmdWwgd29vZGVkIGdsZW5cIlxuICApLFxuICBsYXRpdHVkZTogNTUuNzAwNDI3NjkwODM2NjU1LFxuICBsb2NhdGlvbklkOiBcImF5cnNoaXJlbm9ydGgtZGFscnktbHlubmZhbGxzXCIsXG4gIGxvbmdpdHVkZTogLTQuNzMyNzI3Njk5MTkxMDEsXG4gIG5hbWU6IFwiTHlubiBGYWxscyBcIixcbiAgcGhvdG9zOiBbXG4gICAge1xuICAgICAgdXJsOiBgJHtURVNUX1BIT1RPU19CQVNFVVJMfS9heXJzaGlyZW5vcnRoLWRhbHJ5LWx5bm5mYWxscy5qcGdgLFxuICAgIH0sXG4gIF0sXG4gIHJlZ2lvbjogXCJBeXJzaGlyZSBOb3J0aFwiLFxufSk7XG5cbmNvbnN0IERZTkFNT0RCX0xZTk5fRkFMTFMgPSB7XG4gIGNoYWxsZW5nZTogeyBTOiBcIlRyeSB5b3VyIGhhbmQgYXQgc29tZSBuYXR1cmUgcGhvdG9ncmFwaHkhXCIgfSxcbiAgY2l0eTogeyBTOiBcIkRhbHJ5XCIgfSxcbiAgY291bnR5OiB7IFM6IFwiQXlyc2hpcmUgTm9ydGhcIiB9LFxuICBkZXNjcmlwdGlvbjoge1xuICAgIFM6IGV4cGVjdC5zdHJpbmdDb250YWluaW5nKFwiQSBzaG9ydCB3YWxrIGluIGEgYmVhdXRpZnVsIHdvb2RlZCBnbGVuXCIpLFxuICB9LFxuICBsYXRpdHVkZTogeyBOOiBcIjU1LjcwMDQyNzY5MDgzNjY1NVwiIH0sXG4gIGxvY2F0aW9uSWQ6IHsgUzogXCJheXJzaGlyZW5vcnRoLWRhbHJ5LWx5bm5mYWxsc1wiIH0sXG4gIGxvbmdpdHVkZTogeyBOOiBcIi00LjczMjcyNzY5OTE5MTAxXCIgfSxcbiAgbmFtZTogeyBTOiBcIkx5bm4gRmFsbHMgXCIgfSxcbiAgcGhvdG9zOiB7XG4gICAgTDogW1xuICAgICAge1xuICAgICAgICBNOiB7XG4gICAgICAgICAgdXJsOiB7XG4gICAgICAgICAgICBTOiBgJHtURVNUX1BIT1RPU19CQVNFVVJMfS9heXJzaGlyZW5vcnRoLWRhbHJ5LWx5bm5mYWxscy5qcGdgLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gIHJlZ2lvbjogeyBTOiBcIkF5cnNoaXJlIE5vcnRoXCIgfSxcbn07XG5cbmNvbnN0IElOREVYX0NST0NPRElMRV9ST0NLID0gMzM7XG5cbmNvbnN0IExPQ0FUSU9OX0NST0NPRElMRV9ST0NLID0gZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICBjaGFsbGVuZ2U6IFwiRHJhdyB5b3VyIG93biBjcm9jb2RpbGUgbWFzdGVycGllY2UhXCIsXG4gIGNpdHk6IFwiTWlsbHBvcnRcIixcbiAgY291bnR5OiBcIkF5cnNoaXJlIE5vcnRoXCIsXG4gIGRlc2NyaXB0aW9uOiBleHBlY3Quc3RyaW5nQ29udGFpbmluZyhcbiAgICBcIkNyb2NvZGlsZSBSb2NrIGlzIGFuIGljb25pYyBNaWxscG9ydCBsYW5kbWFya1wiXG4gICksXG4gIGxhdGl0dWRlOiA1NS43NTMwODE2MjI2ODgzMixcbiAgbG9jYXRpb25JZDogXCJheXJzaGlyZW5vcnRoLW1pbGxwb3J0LWNyb2NvZGlsZXJvY2tcIixcbiAgbG9uZ2l0dWRlOiAtNC45MjI1MjU5MzA0MzA5NyxcbiAgbmFtZTogXCJDcm9jb2RpbGUgUm9ja1wiLFxuICBwaG90b3M6IFtcbiAgICB7XG4gICAgICBhdHRyaWJ1dGlvbjogXCJEZUZhY3RvXCIsXG4gICAgICBjb3B5cmlnaHQ6IFwiQ0MgQlktU0EgNC4wXCIsXG4gICAgICBvcmlnaW5hbFVybDogV0lLSU1FRElBX1VSTCxcbiAgICAgIHVybDogYCR7VEVTVF9QSE9UT1NfQkFTRVVSTH0vNjQwcHgtQ3JvY29kaWxlX1JvY2slMkNfTWlsbHBvcnQuanBnYCxcbiAgICB9LFxuICBdLFxuICByZWdpb246IFwiQXlyc2hpcmUgTm9ydGhcIixcbn0pO1xuXG5kZXNjcmliZShcImJ1aWxkTG9jYXRpb25zXCIsICgpID0+IHtcbiAgaXQoXCJzdWNjZXNzIHJlc3BvbnNlXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICB2YXIgd29ya2Jvb2sgPSBYTFNYLnJlYWRGaWxlKFRFU1RfU1BSRUFEU0hFRVRfUEFUSCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBidWlsZExvY2F0aW9ucyh3b3JrYm9vayk7XG5cbiAgICAvLyBDaGVjayBleHBlY3RlZCBudW1iZXIgb2YgbG9jYXRpb25zXG4gICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKEVYUEVDVEVEX0xPQ0FUSU9OX0NPVU5UKTtcblxuICAgIC8vIENoZWNrIGZvcm0gb2Ygc2FtcGxlIGxvY2F0aW9uIC0gcGhvdG8gZmlsZVxuICAgIGV4cGVjdChyZXN1bHRbSU5ERVhfTFlOTl9GQUxMU10pLnRvRXF1YWwoTE9DQVRJT05fTFlOTl9GQUxMUyk7XG5cbiAgICAvLyBDaGVjayBmb3JtIG9mIHNhbXBsZSBsb2NhdGlvbiAtIHBob3RvIHdpa2kgbGlua1xuICAgIGV4cGVjdChyZXN1bHRbSU5ERVhfQ1JPQ09ESUxFX1JPQ0tdKS50b0VxdWFsKExPQ0FUSU9OX0NST0NPRElMRV9ST0NLKTtcblxuICAgIC8vIEV4cGVjdCBsb2NhdGlvbiB3aXRoIGJhZCBkYXRhIHRvIGJlIGZpbHRlcmVkIG91dFxuICAgIGV4cGVjdChcbiAgICAgIHJlc3VsdC5maW5kKChsb2NhdGlvbikgPT4gbG9jYXRpb24ubmFtZSA9PT0gXCJEYWxob3VzaWUgQXJjaFwiKVxuICAgICkudG9CZVVuZGVmaW5lZCgpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZShcImNoZWNrU3ByZWFkc2hlZXRcIiwgKCkgPT4ge1xuICBpdChcInN1Y2Nlc3MgcmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGZldGNoTW9jay5tb2NrUmVzcG9uc2UoV0lLSU1FRElBX1JFU1BPTlNFKTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNoZWNrU3ByZWFkc2hlZXQoKTtcblxuICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoRVhQRUNURURfTE9DQVRJT05fQ09VTlQpO1xuXG4gICAgZXhwZWN0KGR5bmFtb2RiQ2xpZW50LnNlbmQpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwicHJvY2Vzc1NwcmVhZHNoZWV0XCIsICgpID0+IHtcbiAgaXQoXCJzdWNjZXNzIHJlc3BvbnNlXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICBhd2FpdCBwcm9jZXNzU3ByZWFkc2hlZXQoKTtcblxuICAgIGV4cGVjdChkeW5hbW9kYkNsaWVudC5zZW5kKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoRVhQRUNURURfTE9DQVRJT05fQ09VTlQpO1xuICAgIGV4cGVjdChkeW5hbW9kYkNsaWVudC5zZW5kKS50b0hhdmVCZWVuTnRoQ2FsbGVkV2l0aChcbiAgICAgIElOREVYX0xZTk5fRkFMTFMgKyAxLFxuICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBpbnB1dDoge1xuICAgICAgICAgIEl0ZW06IERZTkFNT0RCX0xZTk5fRkFMTFMsXG4gICAgICAgICAgVGFibGVOYW1lOiBURVNUX0xPQ0FUSU9OU19UQUJMRV9OQU1FLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICApO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZShcInBhcnNlQ29vcmRpbmF0ZXNcIiwgKCkgPT4ge1xuICBpdChcInN1Y2Nlc3MgcmVzcG9uc2Ugd2l0aCBzdHJpbmcgZGVjaW1hbCB2YWx1ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGV4cGVjdChwYXJzZUNvb3JkaW5hdGVzKFwiNTUuNzYyODFOXCIsIFwiLTQuMDE0NTA3RVwiKSkudG9FcXVhbCh7XG4gICAgICBsYXRpdHVkZTogNTUuNzYyODEsXG4gICAgICBsb25naXR1ZGU6IC00LjAxNDUwNyxcbiAgICB9KTtcblxuICAgIC8vIEhhbmRsZSB3cm9uZyBsb25naXR1ZGUgZGlyZWN0aW9uXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoXCI1NS43OTY1Nk5cIiwgXCItNC4wMjYyV1wiKSkudG9FcXVhbCh7XG4gICAgICBsYXRpdHVkZTogNTUuNzk2NTYsXG4gICAgICBsb25naXR1ZGU6IC00LjAyNjIsXG4gICAgfSk7XG5cbiAgICAvLyBFeHRyYSBjaGFyYWN0ZXJzXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoXCI1Ny42NTEywrAgTlwiLCBcIjMuMzA1NcKwIFdcIikpLnRvRXF1YWwoe1xuICAgICAgbGF0aXR1ZGU6IDU3LjY1MTIsXG4gICAgICBsb25naXR1ZGU6IC0zLjMwNTUsXG4gICAgfSk7XG4gICAgZXhwZWN0KFxuICAgICAgcGFyc2VDb29yZGluYXRlcyhcIjU2LjI5NDEgLyA1NsKwMTcnMzhcXFwiTlwiLCBcIi0zLjcxMjcgLyAzwrA0Mic0NVxcXCJXXCIpXG4gICAgKS50b0VxdWFsKHtcbiAgICAgIGxhdGl0dWRlOiA1Ni4yOTQxLFxuICAgICAgbG9uZ2l0dWRlOiAtMy43MTI3LFxuICAgIH0pO1xuICB9KTtcblxuICBpdChcInN1Y2Nlc3MgcmVzcG9uc2Ugd2l0aCBudW1lcmljIGRlY2ltYWwgdmFsdWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICBleHBlY3QocGFyc2VDb29yZGluYXRlcyg1Ny4xMzI1NCwgLTIuMjAxNzEpKS50b0VxdWFsKHtcbiAgICAgIGxhdGl0dWRlOiA1Ny4xMzI1NCxcbiAgICAgIGxvbmdpdHVkZTogLTIuMjAxNzEsXG4gICAgfSk7XG5cbiAgICAvLyBJbiBjYXNlcyB3aGVyZSBsb25naXR1ZGUgaXMgbWlzc2luZyBzaWduXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoNTUuNzgxNCwgNC4yOTYxKSkudG9FcXVhbCh7XG4gICAgICBsYXRpdHVkZTogNTUuNzgxNCxcbiAgICAgIGxvbmdpdHVkZTogLTQuMjk2MSxcbiAgICB9KTtcblxuICAgIC8vIEhpZ2ggcHJlY2lzaW9uXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoNTYuMDAwNzg4OTY5OTg2MiwgLTMuODQwNDU3OTg2NzQ1NzMpKS50b0VxdWFsKHtcbiAgICAgIGxhdGl0dWRlOiA1Ni4wMDA3ODg5Njk5ODYyLFxuICAgICAgbG9uZ2l0dWRlOiAtMy44NDA0NTc5ODY3NDU3MyxcbiAgICB9KTtcbiAgfSk7XG5cbiAgaXQoXCJzdWNjZXNzIHJlc3BvbnNlIHdpdGggZGVncmVlIG1pbnV0ZSBzZWNvbmRzIHZhbHVlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoXCI1NsKwMDcnMjMuM1xcXCJOXCIsIFwiM8KwMDcnMjMuMVxcXCJXXCIpKS50b0VxdWFsKHtcbiAgICAgIGxhdGl0dWRlOiA1Ni4xMjMxMzg4ODg4ODg4OSxcbiAgICAgIGxvbmdpdHVkZTogLTMuMTIzMDgzMzMzMzMzMzMzLFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoXCI1NsKwIDA3JyAyMy4zIFxcXCJOXCIsIFwiM8KwIDA3ICcgMjMuMSBcXFwiV1wiKSkudG9FcXVhbCh7XG4gICAgICBsYXRpdHVkZTogNTYuMTIzMTM4ODg4ODg4ODksXG4gICAgICBsb25naXR1ZGU6IC0zLjEyMzA4MzMzMzMzMzMzMyxcbiAgICB9KTtcblxuICAgIGV4cGVjdChwYXJzZUNvb3JkaW5hdGVzKFwiNTfCsDM24oCyNTjigLLigLJOXCIsIFwiM8KwMzHigLIyNy41NeKAsuKAsldcIikpLnRvRXF1YWwoe1xuICAgICAgbGF0aXR1ZGU6IDU3LjYxNjExMTExMTExMTExLFxuICAgICAgbG9uZ2l0dWRlOiAtMy41MjQzMTk0NDQ0NDQ0NDQ2LFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoXCI1NsKwMDcnMjNcXFwiTlwiLCBcIjPCsDA3JzIzXFxcIldcIikpLnRvRXF1YWwoe1xuICAgICAgbGF0aXR1ZGU6IDU2LjEyMzA1NTU1NTU1NTU1LFxuICAgICAgbG9uZ2l0dWRlOiAtMy4xMjMwNTU1NTU1NTU1NTU3LFxuICAgIH0pO1xuICB9KTtcblxuICBpdChcImZhaWwgd2l0aCBtaXNzaW5nIGxhdGl0dWRlXCIsIGFzeW5jICgpID0+IHtcbiAgICBleHBlY3QocGFyc2VDb29yZGluYXRlcyg1Ny4xMzI1NCwgdW5kZWZpbmVkKSkudG9CZVVuZGVmaW5lZCgpO1xuICB9KTtcblxuICBpdChcImZhaWwgd2l0aCBtaXNzaW5nIGxvbmdpdHVkZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXModW5kZWZpbmVkLCAtMi4yMDE3MSkpLnRvQmVVbmRlZmluZWQoKTtcbiAgfSk7XG5cbiAgaXQoXCJmYWlsIHdpdGggbWlzc2luZyBkZWNpbWFsIHBvaW50XCIsIGFzeW5jICgpID0+IHtcbiAgICBleHBlY3QocGFyc2VDb29yZGluYXRlcyg1NjczMTU0OCwgLTIuNjYwODI1KSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIGV4cGVjdChwYXJzZUNvb3JkaW5hdGVzKDU2LjczMTU0OCwgLTI2NjA4MjUpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgZXhwZWN0KHBhcnNlQ29vcmRpbmF0ZXMoNTY3MzE1NDgsIC0yNjYwODI1KSkudG9CZVVuZGVmaW5lZCgpO1xuICB9KTtcblxuICBpdChcImZhaWwgd2l0aCBtaXNzaW5nIHNlY29uZHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGV4cGVjdChwYXJzZUNvb3JkaW5hdGVzKFwiNTbCsCAxMycgTlwiLCBcIjIgNDEnIFdcIikpLnRvQmVVbmRlZmluZWQoKTtcbiAgfSk7XG5cbiAgaXQoXCJmYWlsIHdpdGggdHJhbnNwb3NlZCBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlXCIsIGFzeW5jICgpID0+IHtcbiAgICBleHBlY3QocGFyc2VDb29yZGluYXRlcygtMi4yMDE3MSwgNTcuMTMyNTQpKS50b0JlVW5kZWZpbmVkKCk7XG4gIH0pO1xuXG4gIGl0KFwiZmFpbCB3aXRoIGludmFsaWQgaW5wdXRcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGV4cGVjdChwYXJzZUNvb3JkaW5hdGVzKFwiWFhYXCIsIFwiWVlZXCIpKS50b0JlVW5kZWZpbmVkKCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwiZ2V0V2lraW1lZGlhUGhvdG9EYXRhXCIsICgpID0+IHtcbiAgaXQoXCJzdWNjZXNzIHJlc3BvbnNlXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRXaWtpbWVkaWFQaG90b0RhdGEoV0lLSU1FRElBX1VSTCk7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgIGltYWdlVXJsOiBXSUtJTUVESUFfSU1BR0VfVVJMLFxuICAgICAgZmlsZW5hbWU6IFdJS0lNRURJQV9GSUxFTkFNRSxcbiAgICAgIG9yaWdpbmFsVXJsOiBXSUtJTUVESUFfVVJMLFxuICAgICAgYXR0cmlidXRpb246IFwiRGVGYWN0b1wiLFxuICAgICAgY29weXJpZ2h0OiBcIkNDIEJZLVNBIDQuMFwiLFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KGZldGNoTW9jaykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIGV4cGVjdChmZXRjaE1vY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFdJS0lNRURJQV9SRVFVRVNULCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwiZ2V0UGhvdG9zXCIsICgpID0+IHtcbiAgY29uc3QgTE9DQVRJT05fSUQgPSBcIm5ldy1sb2NhdGlvblwiO1xuICBjb25zdCBBVFRSSUJVVElPTl9OQU1FID0gXCJJdHMgbXkgcGhvdG9cIjtcbiAgY29uc3QgQVJDSElWRURfUEhPVE9fUkVGID1cbiAgICBcImh0dHBzOi8vY29tbW9ucy53aWtpbWVkaWEub3JnL3dpa2kvRmlsZTpEU0NGMTc2NF9Kb2huc3Rvbl9HYXJkZW5zX0FiZXJkZWVuLmpwZ1wiO1xuXG4gIGl0KFwic3VjY2VzcyByZXNwb25zZSB3aXRoIGFyY2hpdmVkIHBob3RvXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRQaG90b3MoTE9DQVRJT05fSUQsIEFSQ0hJVkVEX1BIT1RPX1JFRik7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtcbiAgICAgIHtcbiAgICAgICAgYXR0cmlidXRpb246IFwiQWxhc2RhaXJXXCIsXG4gICAgICAgIGNvcHlyaWdodDogXCJDQyBCWS1TQSAzLjBcIixcbiAgICAgICAgb3JpZ2luYWxVcmw6XG4gICAgICAgICAgXCJodHRwczovL2NvbW1vbnMud2lraW1lZGlhLm9yZy93aWtpL0ZpbGU6RFNDRjE3NjRfSm9obnN0b25fR2FyZGVuc19BYmVyZGVlbi5qcGdcIixcbiAgICAgICAgdXJsOiBgJHtURVNUX1BIT1RPU19CQVNFVVJMfS82NDBweC1EU0NGMTc2NF9Kb2huc3Rvbl9HYXJkZW5zX0FiZXJkZWVuLmpwZ2AsXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgZXhwZWN0KGZldGNoTW9jaykubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoXCJzdWNjZXNzIHJlc3BvbnNlIHdpdGggd2lraW1lZGlhIHBob3RvXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRQaG90b3MoTE9DQVRJT05fSUQsIFdJS0lNRURJQV9VUkwpO1xuXG4gICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChbXG4gICAgICB7XG4gICAgICAgIGF0dHJpYnV0aW9uOiBcIkRlRmFjdG9cIixcbiAgICAgICAgY29weXJpZ2h0OiBcIkNDIEJZLVNBIDQuMFwiLFxuICAgICAgICBvcmlnaW5hbFVybDogV0lLSU1FRElBX1VSTCxcbiAgICAgICAgdXJsOiBgJHtURVNUX1BIT1RPU19CQVNFVVJMfS8ke1dJS0lNRURJQV9GSUxFTkFNRX1gLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGV4cGVjdChmZXRjaE1vY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3QoZmV0Y2hNb2NrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChXSUtJTUVESUFfUkVRVUVTVCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIH0pO1xuICB9KTtcblxuICBpdChcInN1Y2Nlc3MgcmVzcG9uc2Ugd2l0aCBmaWxlIHBob3RvXCIsIGFzeW5jICgpID0+IHtcbiAgICBmZXRjaE1vY2subW9ja1Jlc3BvbnNlKFdJS0lNRURJQV9SRVNQT05TRSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRQaG90b3MoTE9DQVRJT05fSUQsIFwiTG9jYWwgZmlsZS5qcGdcIik7XG5cbiAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKFtcbiAgICAgIHtcbiAgICAgICAgdXJsOiBgJHtURVNUX1BIT1RPU19CQVNFVVJMfS9uZXctbG9jYXRpb24uanBnYCxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICBleHBlY3QoZmV0Y2hNb2NrKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICB9KTtcbn0pO1xuIl19